<!DOCTYPE html>
<html lang="en" manifest="manifest.appcache">
<head>
  <title>Subway Reads</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="index.css" />
  <link rel="icon" href="simplye.png" sizes="300x300" type="image/png"/>
  <!-- Home screen icon in iOS -->
  <link rel="apple-touch-icon" href="simplye.png" sizes="300x300" type="image/png"/>
  <script>
     (function(i,s,o,g,r,a,m){i['GoogleAnalyticsProxyObject']=r;i[r]=i[r]||function(){
     (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
     m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
     })(window,document,'script','https://api.nypltech.org/api/v0.1/ga-proxy/javascript/gaproxy.js','gap');

     gap('init', 'SubwayReads');
     gap('create', 'UA-1420324-145', 'auto');
     gap('send', 'pageview');
  </script>
</head>
<body>
  <nav id="global-nav" aria-label="Main navigation">
    <button aria-controls="global-nav" aria-haspopup="true" tabindex="2" id="menu-button-close">
      <span class="menu-icon" aria-hidden="true">
        <svg width="32" height="32" viewBox="0 0 32 32" class="svgIcon">
        <path d="M17.91272,15.97339l5.65689-5.65689A1.32622,1.32622,0,0,0,21.694,8.44093L16.04938,14.0856l-5.65082-5.725A1.32671,1.32671,0,1,0,8.51,10.22454l5.66329,5.73712L8.43038,21.7046a1.32622,1.32622,0,1,0,1.87557,1.87557l5.73088-5.73088,5.65074,5.72441a1.32626,1.32626,0,1,0,1.88852-1.86261Z"/>
        </svg>
      </span>
    </button>
    <h3>Underground Reads</h3>
    <ul class="tabs">
      <li class="children-tab"><a href="#">Children's Books</a></li>
      <li class="all-tab"><a href="#">All Books</a></li>
    </ul>
  </nav>
  <div class="wrapper">
    <header>
      <a href="#" class="logo">
        <img src="simplyE_logo.png" alt="SimplyE"/>
      </a>
      <h1>Underground Reads</h1>
      <button aria-controls="global-nav" aria-haspopup="true" tabindex="2" id="menu-button-open">
        <span class="menu-icon" aria-hidden="true">
          <svg width="32" height="32" viewBox="0 0 32 32" class="svgIcon">
            <path d="M26.22029,10.40244H5.77971a1.09221,1.09221,0,1,1,0-2.18441H26.22029A1.09221,1.09221,0,1,1,26.22029,10.40244Z"/>
            <path d="M26.22029,16.95568H5.77971a1.09221,1.09221,0,0,1,0-2.18441H26.22029A1.09221,1.09221,0,0,1,26.22029,16.95568Z"/>
            <path d="M26.22029,23.782H5.77971a1.09221,1.09221,0,1,1,0-2.18441H26.22029A1.09221,1.09221,0,1,1,26.22029,23.782Z"/>
          </svg>
        </span>
        <!-- <span class="menu-text visuallyHidden">Menu</span> -->
      </button>
    </header>

    <div class="banner">
      <p>
        Underground Reads is a collection of over 300 free books and short reads curated by The Public
        Libraries of New York City--updated daily.
      </p>
    </div>

    <main>
      <div role="dialog" aria-labelledby="age-check-title" class="age-check" style="display: none">
        <div>
          <h2 id="age-check-title">You must be 13 or older to read all books.</h2>
          <h3>How old are you?</h3>
          <div class="age-check-buttons">
            <button class="age-check-under"><h2>Under 13</h2></button>
            <button class="age-check-over"><h2>13 or Older</h2></button>
          </div>
        </div>
      </div>
<<<<<<< HEAD
      <div class="books">
        {{all_books}}
=======
    </div>
    <div class="books">
      {{all_books}}
    </div>
    <div class="app">
      <h3><span>Access thousands more books from your library with </span><img src="simplyE_logo.png" alt="SimplyE"/></h3>
      <div>
        <span class="hide-on-android">
          <a href="https://itunes.apple.com/us/app/nypl-simplye/id1046583900?mt=8" title="Download on the App Store"><img src="apple_badge.png" alt="Download on the App Store" onclick="gap('send', 'event', 'DownloadApp', 'iOS');"/></a>
        </span>
        <span class="hide-on-ios">
          <a href="https://play.google.com/store/apps/details?id=org.nypl.simplified.simplye&hl=en" title="Get it on Google Play"><img src="google_badge.png" alt="Get it on Google Play" onclick="gap('send', 'event', 'DownloadApp', 'Android');"/></a>
        </span>
>>>>>>> master
      </div>
      <div class="app">
        <h3><span>Access thousands more books from your library with </span><img src="simplyE_logo.png" alt="SimplyE"/></h3>
        <div>
          <span class="hide-on-android">
            <a href="https://itunes.apple.com/us/app/nypl-simplye/id1046583900?mt=8" title="Download on the App Store"><img src="apple_badge.png" alt="Download on the App Store"/></a>
          </span>
          <span class="hide-on-ios">
            <a href="https://play.google.com/store/apps/details?id=org.nypl.simplified.simplye&hl=en" title="Get it on Google Play"><img src="google_badge.png" alt="Get it on Google Play"/></a>
          </span>
        </div>
      </div>
    </main>
    <footer>
      <p>&copy; The New York Public Library</p>
    </footer>
  </div>
  <script type="text/javascript">
    var ios = navigator.userAgent.match(/iPhone|iPad|iPod/i);
    var android = navigator.userAgent.match(/Android/i);
    if (ios) {
      var elements = document.querySelectorAll(".hide-on-ios");
      for (var i = 0; i < elements.length; i++) {
        elements[i].style.display = "none";
      }
    }
    if (android) {
      var elements = document.querySelectorAll(".hide-on-android");
      for (var i = 0; i < elements.length; i++) {
        elements[i].style.display = "none";
      }
    }

    var showAgeCheck = function () {
      document.querySelector(".age-check").style.display = "block";
    };

    var hideAgeCheck = function () {
      document.querySelector(".age-check").style.display = "none";
    };

    var showChildrens = function () {
      document.querySelector(".children-tab").className = "children-tab active";
      document.querySelector(".all-tab").className = "all-tab";
      var elements = document.querySelectorAll(".adult");
      for (var i = 0; i < elements.length; i++) {
        elements[i].style.display = "none";
      }
    };

    var showAdult = function () {
      document.querySelector(".children-tab").className = "children-tab";
      document.querySelector(".all-tab").className = "all-tab active";
      var elements = document.querySelectorAll(".adult");
      for (var i = 0; i < elements.length; i++) {
        elements[i].style.display = "inline";
      }
    };

    document.querySelector(".all-tab").addEventListener("click", function () {
      showAgeCheck();
    });

    document.querySelector(".age-check-under").addEventListener("click", function () {
      hideAgeCheck();
    });

    document.querySelector(".age-check-over").addEventListener("click", function () {
      showAdult();
      hideAgeCheck();
    });

    document.querySelector(".children-tab").addEventListener("click", function () {
      showChildrens();
    });

    var MS = {};
    MS.App = (function() {

      var ESCAPE_CODE = 27;

      var navButton = document.querySelector('#menu-button-open'),
          navButtonClose = document.querySelector('#menu-button-close'),
          navMenu = document.querySelector('#global-nav');

      var navLinks = navMenu.querySelectorAll('a');

      function initApp() {
        navMenu.addEventListener('keydown', handleKeydown);
        navButton.addEventListener('click', handleClick);
        navButtonClose.addEventListener('click', handleClick);
        disableNavLinks();
      }
      function handleKeydown(event) {
        if (event.keyCode === ESCAPE_CODE) {
          document.body.classList.toggle('active');
          disableNavLinks();
          navButton.focus();
        }
      }
      function handleClick(event) {
        if (document.body.classList.contains('active')) {
          document.body.classList.remove('active');
          disableNavLinks();
        }
        else {
          document.body.classList.add('active');
          enableNavLinks();
          /*navLinks.eq(0).focus();*/
        }
      }
      function enableNavLinks() {
        /*navButton.attr('aria-label', 'Menu expanded');*/
        /*navMenu.removeAttr('aria-hidden');
        navLinks.removeAttr('tabIndex');*/
      }
      function disableNavLinks() {
        /*navButton.attr('aria-label', 'Menu collapsed');*/
        /*navMenu.attr('aria-hidden', 'true');
        navLinks.attr('tabIndex', '-1');*/
      }

      return {
        init: function(){
          initApp();
        }
      }
    })();

    document.addEventListener("DOMContentLoaded", function() {
      new MS.App.init();
    });
  </script>
</body>
</html>
